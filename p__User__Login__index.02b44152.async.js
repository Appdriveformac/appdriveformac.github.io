(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{10889:function(Y,E,t){"use strict";t.r(E),t.d(E,{default:function(){return Mn}});var O=t(15009),Z=t.n(O),U=t(97857),A=t.n(U),le=t(99289),W=t.n(le),ue=t(5574),w=t.n(ue),de=t(55758),ce=t(81304),fe=t(29905),z="NULL",ve=function(n){return function(e){return e?(typeof e=="function"&&(z=e()),(Object.prototype.toString.call(e)==="[object String]"||Array.isArray(e))&&(z=e)):z="NULL",n}},me=function(r){return ve(r)},ge=t(13769),he=t.n(ge),pe=t(12444),xe=t.n(pe),ye=t(72004),Se=t.n(ye),Pe=t(25098),k=t.n(Pe),je=t(31996),Ce=t.n(je),Ae=t(26037),Ze=t.n(Ae),Fe=t(9783),V=t.n(Fe),Te=t(75081),Me=t(18446),ze=t.n(Me),v=t(67294),o=t(85893),Ie=function(){return 403},q=function r(n){if(!n)return!1;var e=Object.getPrototypeOf(n);return e===v.Component||e===Function.prototype?!0:r(e)},Re=function(n){if(q(n)){var e=n;return function(s){return(0,o.jsx)(e,A()({},s))}}return v.isValidElement(n)?function(s){return v.cloneElement(n,s)}:function(){return n}},Le=function(n,e){var s=!1;if(e&&(s=function(){return e}),!n)throw new Error("authority is required");return function(i){var l=b(n,i,s||Ie);return Re(l)}},Be=Le,Ne=["ok","error","promise"],_=function(r){Ce()(e,r);var n=Ze()(e);function e(){var s;xe()(this,e);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return s=n.call.apply(n,[this].concat(i)),V()(k()(s),"state",{component:function(){return null}}),V()(k()(s),"shouldComponentUpdate",function(u,m){var g=s.state.component;return ze()(u,s.props)||s.setRenderComponent(u),m.component!==g}),V()(k()(s),"checkIsInstantiation",function(u){if(q(u)){var m=u;return function(g){return(0,o.jsx)(m,A()({},g))}}return v.isValidElement(u)?function(g){return v.cloneElement(u,g)}:function(){return u}}),s}return Se()(e,[{key:"componentDidMount",value:function(){this.setRenderComponent(this.props)}},{key:"setRenderComponent",value:function(a){var i=this,l=this.checkIsInstantiation(a.ok),u=this.checkIsInstantiation(a.error);a.promise.then(function(){return i.setState({component:l}),!0}).catch(function(){i.setState({component:u})})}},{key:"render",value:function(){var a=this.state.component,i=this.props,l=i.ok,u=i.error,m=i.promise,g=he()(i,Ne);return a?(0,o.jsx)(a,A()({},g)):(0,o.jsx)("div",{style:{width:"100%",height:"100%",margin:"auto",paddingTop:50,textAlign:"center"},children:(0,o.jsx)(Te.Z,{size:"large"})})}}]),e}(v.Component),Ee=function(n,e,s,a){if(!n)return s;if(Array.isArray(n)){if(Array.isArray(e)){if(e.some(function(l){return n.includes(l)}))return s}else if(n.includes(e))return s;return a}if(typeof n=="string"){if(Array.isArray(e)){if(e.some(function(l){return n===l}))return s}else if(n===e)return s;return a}if(n instanceof Promise)return(0,o.jsx)(_,{ok:s,error:a,promise:n});if(typeof n=="function"){var i=n(e);return i instanceof Promise?(0,o.jsx)(_,{ok:s,error:a,promise:i}):i?s:a}throw new Error("unsupported parameters")};function Oe(r,n,e){return Ee(r,z,n,e)}var b=Oe,Ue=function(n){var e=n.children,s=n.authority,a=n.noMatch,i=a===void 0?(0,o.jsx)(fe.ZP,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page."}):a,l=typeof e=="undefined"?null:e,u=b(s,l,i);return(0,o.jsx)(o.Fragment,{children:u})},D=Ue;D.Secured=Be,D.check=b;var We=me(D),ee=We,ke=ee(te()),ne=function(){ke=ee(te())};window.reloadAuthorized=ne;var zn=null;function te(r){var n=typeof r=="undefined"&&localStorage?localStorage.getItem("authority"):r,e;try{n&&(e=JSON.parse(n))}catch(s){e=n}return typeof e=="string"?[e]:e||["admin"]}function Ve(r,n){var e=typeof r=="string"?[r]:r;console.log(r,n),localStorage.setItem("authority",JSON.stringify(e)),localStorage.setItem("token",n),ne()}function In(){return CURRENT&&CURRENT.some(function(r){return r===admin})}function Rn(){return CURRENT&&CURRENT.some(function(r){return r===sale_admin})}var be=t(87547),c=t(1413),De={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},He=De,$e=t(91146),Ge=function(n,e){return v.createElement($e.Z,(0,c.Z)((0,c.Z)({},n),{},{ref:e,icon:He}))},Ke=v.forwardRef(Ge),Je=Ke,I=t(91),Qe=t(89451),Xe=t(28459),Ye=t(93967),we=t.n(Ye),qe=t(34994),H=t(4942),_e=t(98082),en=function(n){return(0,H.Z)((0,H.Z)({},n.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:n.colorTextSecondary,fontSize:n.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,H.Z)({},"".concat(n.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function nn(r){return(0,_e.Xj)("LoginForm",function(n){var e=(0,c.Z)((0,c.Z)({},n),{},{componentCls:".".concat(r)});return[en(e)]})}var tn=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function rn(r){var n,e=r.logo,s=r.message,a=r.contentStyle,i=r.title,l=r.subTitle,u=r.actions,m=r.children,g=r.containerStyle,S=r.otherStyle,d=(0,I.Z)(r,tn),K=(0,Qe.YB)(),J=d.submitter===!1?!1:(0,c.Z)((0,c.Z)({searchConfig:{submitText:K.getMessage("loginForm.submitText","\u767B\u5F55")}},d.submitter),{},{submitButtonProps:(0,c.Z)({size:"large",style:{width:"100%"}},(n=d.submitter)===null||n===void 0?void 0:n.submitButtonProps),render:function(p,P){var y,N=P.pop();if(typeof(d==null||(y=d.submitter)===null||y===void 0?void 0:y.render)=="function"){var f,X;return d==null||(f=d.submitter)===null||f===void 0||(X=f.render)===null||X===void 0?void 0:X.call(f,p,P)}return N}}),j=(0,v.useContext)(Xe.ZP.ConfigContext),L=j.getPrefixCls("pro-form-login"),B=nn(L),Q=B.wrapSSR,M=B.hashId,h=function(p){return"".concat(L,"-").concat(p," ").concat(M)},x=(0,v.useMemo)(function(){return e?typeof e=="string"?(0,o.jsx)("img",{src:e}):e:null},[e]);return Q((0,o.jsxs)("div",{className:we()(h("container"),M),style:g,children:[(0,o.jsxs)("div",{className:"".concat(h("top")," ").concat(M).trim(),children:[i||x?(0,o.jsxs)("div",{className:"".concat(h("header")),children:[x?(0,o.jsx)("span",{className:h("logo"),children:x}):null,i?(0,o.jsx)("span",{className:h("title"),children:i}):null]}):null,l?(0,o.jsx)("div",{className:h("desc"),children:l}):null]}),(0,o.jsxs)("div",{className:h("main"),style:(0,c.Z)({width:328},a),children:[(0,o.jsxs)(qe.A,(0,c.Z)((0,c.Z)({isKeyPressSubmit:!0},d),{},{submitter:J,children:[s,m]})),u?(0,o.jsx)("div",{className:h("main-other"),style:S,children:u}):null]})]}))}var re=t(97685),on=t(21770),sn=t(53025),an=t(55241),ln=t(97435),T=t(67027),un=["fieldProps","proFieldProps"],dn=["fieldProps","proFieldProps"],R="text",cn=function(n){var e=n.fieldProps,s=n.proFieldProps,a=(0,I.Z)(n,un);return(0,o.jsx)(T.Z,(0,c.Z)({valueType:R,fieldProps:e,filedConfig:{valueType:R},proFieldProps:s},a))},fn=function(n){var e=(0,on.Z)(n.open||!1,{value:n.open,onChange:n.onOpenChange}),s=(0,re.Z)(e,2),a=s[0],i=s[1];return(0,o.jsx)(sn.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(u){var m,g=u.getFieldValue(n.name||[]);return(0,o.jsx)(an.Z,(0,c.Z)((0,c.Z)({getPopupContainer:function(d){return d&&d.parentNode?d.parentNode:d},onOpenChange:i,content:(0,o.jsxs)("div",{style:{padding:"4px 0"},children:[(m=n.statusRender)===null||m===void 0?void 0:m.call(n,g),n.strengthText?(0,o.jsx)("div",{style:{marginTop:10},children:(0,o.jsx)("span",{children:n.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},n.popoverProps),{},{open:a,children:n.children}))}})},vn=function(n){var e=n.fieldProps,s=n.proFieldProps,a=(0,I.Z)(n,dn),i=(0,v.useState)(!1),l=(0,re.Z)(i,2),u=l[0],m=l[1];return e!=null&&e.statusRender&&a.name?(0,o.jsx)(fn,{name:a.name,statusRender:e==null?void 0:e.statusRender,popoverProps:e==null?void 0:e.popoverProps,strengthText:e==null?void 0:e.strengthText,open:u,onOpenChange:m,children:(0,o.jsx)("div",{children:(0,o.jsx)(T.Z,(0,c.Z)({valueType:"password",fieldProps:(0,c.Z)((0,c.Z)({},(0,ln.Z)(e,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(S){var d;e==null||(d=e.onBlur)===null||d===void 0||d.call(e,S),m(!1)},onClick:function(S){var d;e==null||(d=e.onClick)===null||d===void 0||d.call(e,S),m(!0)}}),proFieldProps:s,filedConfig:{valueType:R}},a))})}):(0,o.jsx)(T.Z,(0,c.Z)({valueType:"password",fieldProps:e,proFieldProps:s,filedConfig:{valueType:R}},a))},$=cn;$.Password=vn,$.displayName="ProFormComponent";var oe=$,se=t(22270),mn=t(84567),gn=t(83607),hn=["options","fieldProps","proFieldProps","valueEnum"],pn=v.forwardRef(function(r,n){var e=r.options,s=r.fieldProps,a=r.proFieldProps,i=r.valueEnum,l=(0,I.Z)(r,hn);return(0,o.jsx)(T.Z,(0,c.Z)({ref:n,valueType:"checkbox",valueEnum:(0,se.h)(i,void 0),fieldProps:(0,c.Z)({options:e},s),lightProps:(0,c.Z)({labelFormatter:function(){return(0,o.jsx)(T.Z,(0,c.Z)({ref:n,valueType:"checkbox",mode:"read",valueEnum:(0,se.h)(i,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:e},s),proFieldProps:a},l))}},l.lightProps),proFieldProps:a},l))}),xn=v.forwardRef(function(r,n){var e=r.fieldProps,s=r.children;return(0,o.jsx)(mn.Z,(0,c.Z)((0,c.Z)({ref:n},e),{},{children:s}))}),yn=(0,gn.G)(xn,{valuePropName:"checked"}),ae=yn;ae.Group=pn;var Sn=ae,F=t(35312),Pn=t(38925),G=t(2453),jn=t(11941),Cn=t(98257),An=t(73935),Zn=t(5467),ie=(0,Cn.kc)(function(r){var n=r.token;return{action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:n.colorPrimaryActive}},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:n.borderRadius,":hover":{backgroundColor:n.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}}),Ln=function(){var n=ie(),e=n.styles;return _jsxs(_Fragment,{children:[_jsx(AlipayCircleOutlined,{className:e.action},"AlipayCircleOutlined"),_jsx(TaobaoCircleOutlined,{className:e.action},"TaobaoCircleOutlined"),_jsx(WeiboCircleOutlined,{className:e.action},"WeiboCircleOutlined")]})},Fn=function(n){var e=n.content;return(0,o.jsx)(Pn.Z,{style:{marginBottom:24},message:e,type:"error",showIcon:!0})},Tn=function(){var n=(0,v.useState)({}),e=w()(n,2),s=e[0],a=e[1],i=(0,v.useState)("account"),l=w()(i,2),u=l[0],m=l[1],g=(0,F.useModel)("@@initialState"),S=g.initialState,d=g.setInitialState,K=ie(),J=K.styles,j=(0,F.useIntl)(),L=function(){var h=W()(Z()().mark(function x(){var C,p;return Z()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,S==null||(C=S.fetchUserInfo)===null||C===void 0?void 0:C.call(S);case 2:p=y.sent;debugger;p?((0,An.flushSync)(function(){d(function(N){return A()(A()({},N),{},{currentUser:p})})}),window.location.href="/"):localStorage.removeItem("token");case 5:case"end":return y.stop()}},x)}));return function(){return h.apply(this,arguments)}}();(0,v.useEffect)(function(){L().then(function(h){}),localStorage.setItem("umi_locale","en-US")},[]);var B=function(){var h=W()(Z()().mark(function x(C){var p,P,y;return Z()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.prev=0,f.next=3,(0,ce.v)(A()(A()({},C),{},{type:u}));case 3:if(p=f.sent,p.status!==200){f.next=13;break}return f.next=7,Ve(p.result.currentAuthority,p.result.ApiKey);case 7:P=j.formatMessage({id:"pages.login.success",defaultMessage:"\u0110\u0103ng nh\u1EADp th\xE0nh c\xF4ng\uFF01"}),G.ZP.success(P),a(p),window.location.href="/",f.next=14;break;case 13:G.ZP.error(p.message);case 14:f.next=21;break;case 16:f.prev=16,f.t0=f.catch(0),y=j.formatMessage({id:"pages.login.failure",defaultMessage:"\u0110\u0103ng nh\u1EADp th\u1EA5t b\u1EA1i, vui l\xF2ng th\u1EED l\u1EA1i\uFF01"}),console.log(f.t0),G.ZP.error(y);case 21:case"end":return f.stop()}},x,null,[[0,16]])}));return function(C){return h.apply(this,arguments)}}(),Q=s.status,M=s.type;return(0,o.jsxs)("div",{className:J.container,children:[(0,o.jsx)(F.Helmet,{children:(0,o.jsxs)("title",{children:[j.formatMessage({id:"menu.login",defaultMessage:"\u0110\u0103ng nh\u1EADp"}),"- ",Zn.Z.title]})}),(0,o.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,o.jsxs)(rn,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,o.jsx)("img",{alt:"logo",src:"/logo.svg"}),title:"QR Order",subTitle:j.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:"\u0110\u0103ng nh\u1EADp"}},onFinish:function(){var h=W()(Z()().mark(function x(C){return Z()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,B(C);case 2:case"end":return P.stop()}},x)}));return function(x){return h.apply(this,arguments)}}(),children:[(0,o.jsx)(jn.Z,{activeKey:u,onChange:m,centered:!0,items:[{key:"account",label:j.formatMessage({id:"pages.login.accountLogin.tab",defaultMessage:"\u0110\u0103ng nh\u1EADp t\xE0i kho\u1EA3n"})}]}),Q==="error"&&M==="account"&&(0,o.jsx)(Fn,{content:j.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF(admin/ant.design)"})}),u==="account"&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(oe,{name:"userName",fieldProps:{size:"large",prefix:(0,o.jsx)(be.Z,{})},placeholder:j.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D: admin or user"}),rules:[{required:!0,message:(0,o.jsx)(F.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,o.jsx)(oe.Password,{name:"password",fieldProps:{size:"large",prefix:(0,o.jsx)(Je,{})},placeholder:j.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,o.jsx)(F.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),(0,o.jsxs)("div",{style:{marginBottom:24},children:[(0,o.jsx)(Sn,{noStyle:!0,name:"autoLogin",children:(0,o.jsx)(F.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,o.jsx)("a",{style:{float:"right"},children:(0,o.jsx)(F.FormattedMessage,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,o.jsx)(de.$_,{})]})},Mn=Tn},18446:function(Y,E,t){var O=t(90939);function Z(U,A){return O(U,A)}Y.exports=Z}}]);
